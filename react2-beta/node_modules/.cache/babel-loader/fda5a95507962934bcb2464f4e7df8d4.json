{"ast":null,"code":"var _jsxFileName = \"/Users/sun/Desktop/Comp Sci 639 UI/HW/react2-alpha-YurenSUN/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport CompletedCourseArea from './CompleCourseArea';\nimport RecomCourseArea from './RecomCourseArea';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      addedCourses: [],\n      compleCourses: {},\n      interests: [],\n      interestedCourses: [],\n      wishCourses: [],\n      prereqs: {}\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(res => res.json()).then(data => this.setState({\n      allCourses: data,\n      filteredCourses: data,\n      subjects: this.getSubjects(data),\n      interests: this.getInterests(data),\n      prereqs: this.getpreReq(data)\n    }));\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed').then(res => res.json()).then(data => this.setState({\n      compleCourses: data\n    }));\n  }\n\n  getpreReq(data) {\n    let prereqs = {};\n\n    for (const course of Object.values(data)) {\n      prereqs[course.number] = course.requisites;\n    }\n\n    console.log(prereqs);\n    return prereqs;\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      if (subjects.indexOf(course.subject) === -1) subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  getInterests(data) {\n    let interests = [];\n    interests.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      for (const keyword of course.keywords) if (interests.indexOf(keyword) === -1) interests.push(keyword);\n    }\n\n    return interests;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  } // to add course\n  // input: the course json object\n\n\n  addCourse(course) {\n    // check whether the course was added before\n    var joined = this.state.addedCourses;\n    var added = 0;\n\n    for (const index in joined) {\n      //  course added before\n      if (joined[index].number === course.number) {\n        joined[index] = course;\n        added = 1;\n      }\n    }\n\n    if (!added) {\n      // course not added before\n      joined = joined.concat(course);\n    }\n\n    this.setState({\n      addedCourses: joined\n    });\n  } // to add subsection\n  // input string: course number;section number;subsection number\n\n\n  addSubSection(subSection) {\n    // split to get course, section, subsetion number\n    var splited = subSection.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n    var subSecNum = splited[2]; // get the data for current course\n\n    var curCourse;\n    var curSec;\n    var curSubSec;\n    var i, j, k;\n\n    for (i = 0; i < this.state.allCourses.length; i++) {\n      if (this.state.allCourses[i].number === courseNum) {\n        curCourse = JSON.parse(JSON.stringify(this.state.allCourses[i]));\n\n        for (j = 0; j < curCourse.sections.length; j++) {\n          if (curCourse.sections[j].number === sectionNum) {\n            curSec = JSON.parse(JSON.stringify(curCourse.sections[j]));\n\n            for (k = 0; k < curSec.subsections.length; k++) {\n              if (curSec.subsections[k].number === subSecNum) {\n                curSubSec = JSON.parse(JSON.stringify(curSec.subsections[k]));\n                curSec.subsections = [JSON.parse(JSON.stringify(curSec.subsections[k]))];\n                curCourse.sections = [JSON.parse(JSON.stringify(curSec))];\n                break;\n              }\n            }\n\n            break;\n          }\n        }\n\n        break;\n      }\n    } // traverse through the addedCourse to see whether current course exist\n\n\n    var joined = this.state.addedCourses;\n    var added = 0;\n\n    for (i = 0; i < joined.length; i++) {\n      //  course added before\n      if (joined[i].number === courseNum) {\n        // cur course exist, check section\n        for (j = 0; j < joined[i].sections.length; j++) {\n          if (joined[i].sections[j].number === sectionNum) {\n            // cur section exist, check subsection\n            for (k = 0; k < joined[i].sections[j].subsections.length; k++) {\n              if (joined[i].sections[j].subsections[k].number === subSecNum) {\n                added = 1;\n                break;\n              }\n            }\n\n            if (!added) {\n              // add the subsection\n              joined[i].sections[j].subsections[joined[i].sections[j].subsections.length] = curSubSec;\n              added = 1;\n            }\n\n            break;\n          }\n        } // cur course exist, section and subsection not exist\n\n\n        if (!added) {\n          joined[i].sections[joined[i].sections.length] = curSec;\n          added = 1;\n        }\n\n        break;\n      }\n    }\n\n    if (!added) {\n      // not added before\n      joined = joined.concat(curCourse);\n    }\n\n    this.setState({\n      addedCourses: joined\n    });\n  } // to add section\n  // input string: course number;section number\n\n\n  addSection(section) {\n    var splited = section.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1]; // get the data for current course\n\n    var curCourse;\n    var curSec;\n    var i, j;\n\n    for (i = 0; i < this.state.allCourses.length; i++) {\n      if (this.state.allCourses[i].number === courseNum) {\n        curCourse = JSON.parse(JSON.stringify(this.state.allCourses[i]));\n\n        for (j = 0; j < curCourse.sections.length; j++) {\n          if (curCourse.sections[j].number === sectionNum) {\n            curSec = JSON.parse(JSON.stringify(curCourse.sections[j]));\n            curCourse.sections = [JSON.parse(JSON.stringify(curSec))];\n            break;\n          }\n        }\n\n        break;\n      }\n    } // traverse through the addedCourse to see whether current course exist\n\n\n    var joined = this.state.addedCourses;\n    var added = 0;\n\n    for (i = 0; i < joined.length; i++) {\n      //  course added before\n      if (joined[i].number === courseNum) {\n        // cur course exist, check section\n        for (j = 0; j < joined[i].sections.length; j++) {\n          if (joined[i].sections[j].number === sectionNum) {\n            // section exist, replace with the whole section\n            joined[i].sections[j] = curSec;\n            added = 1;\n            break;\n          }\n        } // cur course exist, section and subsection not exist\n\n\n        if (!added) {\n          joined[i].sections[joined[i].sections.length] = curSec;\n          added = 1;\n        }\n\n        break;\n      }\n    }\n\n    if (!added) {\n      // not added before\n      joined = joined.concat(curCourse);\n    }\n\n    this.setState({\n      addedCourses: joined\n    });\n  } // to remove course\n  // input the course json object\n\n\n  remCourse(course) {\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var i;\n\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number !== course.number) {\n        // not the course to delete\n        removed.push(ori[i]);\n      }\n    }\n\n    this.setState({\n      addedCourses: removed\n    });\n  } // to remove section\n  // input string: course number;section number\n\n\n  remSection(section) {\n    var splited = section.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var remCourse;\n    var i, j;\n\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number === courseNum) {\n        remCourse = JSON.parse(JSON.stringify(ori[i]));\n        remCourse.sections = []; // the course to remove section, keep the section not to remove\n\n        for (j = 0; j < ori[i].sections.length; j++) {\n          // add section not to remove\n          if (ori[i].sections[j].number !== sectionNum) {\n            remCourse.sections[remCourse.sections.length] = ori[i].sections[j];\n          }\n        } // if no section left, delete course\n\n\n        if (remCourse.sections.length) {\n          removed.push(remCourse);\n        }\n      } else {\n        // not the course to remove section\n        removed.push(ori[i]);\n      }\n    }\n\n    this.setState({\n      addedCourses: removed\n    });\n  } // to remove subsection\n  // input string: course number;section number;subsection number\n\n\n  remSubSection(subsection) {\n    // split to get course, section, subsetion number\n    var splited = subsection.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n    var subSecNum = splited[2];\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var remCourse;\n    var remSection; // traverse through the addedCourse to see whether current course exist\n\n    var i, j, k;\n\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number === courseNum) {\n        // cur course exist, keep sections not to remove\n        remCourse = JSON.parse(JSON.stringify(ori[i]));\n        remCourse.sections = [];\n\n        for (j = 0; j < ori[i].sections.length; j++) {\n          if (ori[i].sections[j].number === sectionNum) {\n            // cur section, keep subsection not to remove\n            remSection = JSON.parse(JSON.stringify(ori[i].sections[j]));\n            remSection.subsections = [];\n\n            for (k = 0; k < ori[i].sections[j].subsections.length; k++) {\n              if (ori[i].sections[j].subsections[k].number !== subSecNum) {\n                remSection.subsections[remSection.subsections.length] = ori[i].sections[j].subsections[k];\n              }\n            } // if no subsection left, delete section\n\n\n            if (remSection.subsections.length) {\n              remCourse.sections[remCourse.sections.length] = remSection;\n            }\n          } else {\n            remCourse.sections[remCourse.sections.length] = ori[i].sections[j];\n          }\n        } // if no section left, delete course\n\n\n        if (remCourse.sections.length) {\n          removed.push(remCourse);\n        }\n      } else {\n        // course not to remove\n        removed.push(ori[i]);\n      }\n    }\n\n    this.setState({\n      addedCourses: removed\n    });\n  }\n\n  rating(rating) {\n    // in the format course number:rating\n    // get a list of interested areas and add courses to it.\n    // if rating < 3 or change to no rated, delete the related interests\n    // store as the formate course number: course name; list of interests\n    var rating_num = rating.split(\":\")[1];\n    var rating_course = rating.split(\":\")[0];\n    var int_courses = this.state.interestedCourses;\n\n    if (rating_num === \"No Rating\" || parseInt(rating_num) < 3) {\n      // remove from interested courses\n      for (var i = 0; i < int_courses.length; i++) {\n        if (int_courses[i] === rating_course) {\n          int_courses.splice(i, 1);\n        }\n      }\n    } else {\n      // add to interested courses\n      if (int_courses.indexOf(rating_course) === -1) int_courses.push(rating_course);\n    }\n\n    this.setState({\n      interestedCourses: int_courses\n    });\n  }\n\n  wishList(course) {\n    // check whether the course was added before\n    var wished = this.state.wishCourses;\n    var added = 0;\n\n    for (var i = 0; i < wished.length; i++) {\n      //  course added before, remove it\n      if (wished[i].split(\":\")[0] === course.split(\":\")[0]) {\n        wished.splice(i, 1);\n        added = 1;\n      }\n    }\n\n    if (!added) {\n      // course not added before\n      wished = wished.concat(course);\n    }\n\n    this.setState({\n      wishCourses: wished\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"header\", {\n      class: \"navbar navbar-expand-md bg-light pl-3 pt-3\",\n      style: {\n        height: \"5vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      class: \"header-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }\n    }, \"Course Search\")), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search_cart\",\n      style: {\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search_cart\",\n      title: \"Search and Cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container-fluid m-0 p-0 overflow-hidden bg-light\",\n      style: {\n        height: \"95vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row m-0 p-0 vh-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-8 p-0 m-0 overflow-hidden vh-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row p-0 m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-3 border overflow-auto vh-100 pt-2 px-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      interests: this.state.interests,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-9 border overflow-auto vh-100 pt-2 pb-5 px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      allData: this.state.allCourses,\n      addSubSection: this.addSubSection.bind(this),\n      addSection: this.addSection.bind(this),\n      addCourse: this.addCourse.bind(this),\n      cartMode: false,\n      compleCourses: this.state.compleCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"cartBg\",\n      class: \"col-md-4 border overflow-auto vh-100 pt-2 pb-5 px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.addedCourses,\n      allData: this.state.allCourses,\n      remSubSection: this.remSubSection.bind(this),\n      remSection: this.remSection.bind(this),\n      remCourse: this.remCourse.bind(this),\n      wishCourse: this.wishList.bind(this),\n      wishCourses: this.state.wishCourses,\n      cartMode: true,\n      compleCourses: this.state.compleCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"Completed\",\n      title: \"Completed Courses\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 19\n      }\n    }, \"Completed Courses\")), /*#__PURE__*/React.createElement(CompletedCourseArea, {\n      courses: this.state.allCourses,\n      compleCourses: this.state.compleCourses,\n      rating: this.rating.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      title: \"Recommended Courses\",\n      eventKey: \"Recommended\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 19\n      }\n    }, \"Recommended Courses\")), /*#__PURE__*/React.createElement(RecomCourseArea, {\n      courses: this.state.allCourses,\n      interestedCourses: this.state.interestedCourses,\n      compleCourses: this.state.compleCourses,\n      wishCourses: this.state.wishCourses,\n      wishCourse: this.wishList.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sun/Desktop/Comp Sci 639 UI/HW/react2-alpha-YurenSUN/src/App.js"],"names":["React","Tabs","Tab","Sidebar","CourseArea","CompletedCourseArea","RecomCourseArea","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","addedCourses","compleCourses","interests","interestedCourses","wishCourses","prereqs","componentDidMount","fetch","then","res","json","data","setState","getSubjects","getInterests","getpreReq","course","Object","values","number","requisites","console","log","push","indexOf","subject","keyword","keywords","setCourses","courses","addCourse","joined","added","index","concat","addSubSection","subSection","splited","split","courseNum","sectionNum","subSecNum","curCourse","curSec","curSubSec","i","j","k","length","JSON","parse","stringify","sections","subsections","addSection","section","remCourse","ori","removed","remSection","remSubSection","subsection","rating","rating_num","rating_course","int_courses","parseInt","splice","wishList","wished","render","height","zIndex","width","backgroundColor","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport CompletedCourseArea from './CompleCourseArea';\nimport RecomCourseArea from './RecomCourseArea';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      addedCourses: [],\n      compleCourses: {},\n      interests: [],\n      interestedCourses: [],\n      wishCourses: [],\n      prereqs: {}\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(\n      res => res.json()\n    ).then(data => this.setState({\n      allCourses: data, filteredCourses: data,\n      subjects: this.getSubjects(data), \n      interests: this.getInterests(data),\n      prereqs : this.getpreReq(data),\n    }));\n\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed').then(\n      res => res.json()\n    ).then(data => this.setState({ compleCourses: data }));\n  }\n\n  getpreReq(data){\n    let prereqs = {};\n    for (const course of Object.values(data)) {\n      prereqs[course.number] = course.requisites;\n    }\n    console.log(prereqs)\n    return prereqs;\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      if (subjects.indexOf(course.subject) === -1)\n        subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  getInterests(data) {\n    let interests = [];\n    interests.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      for (const keyword of course.keywords)\n        if (interests.indexOf(keyword) === -1)\n          interests.push(keyword);\n    }\n    return interests;\n  }\n\n  setCourses(courses) {\n    this.setState({ filteredCourses: courses });\n  }\n\n  // to add course\n  // input: the course json object\n  addCourse(course) {\n    // check whether the course was added before\n    var joined = this.state.addedCourses;\n    var added = 0;\n    for (const index in joined) {\n      //  course added before\n      if (joined[index].number === course.number) {\n        joined[index] = course;\n        added = 1;\n      }\n    }\n\n    if (!added) {\n      // course not added before\n      joined = joined.concat(course);\n    }\n\n    this.setState({ addedCourses: joined })\n  }\n\n  // to add subsection\n  // input string: course number;section number;subsection number\n  addSubSection(subSection) {\n    // split to get course, section, subsetion number\n    var splited = subSection.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n    var subSecNum = splited[2];\n\n    // get the data for current course\n    var curCourse;\n    var curSec;\n    var curSubSec;\n    var i, j, k;\n    for (i = 0; i < this.state.allCourses.length; i++) {\n      if (this.state.allCourses[i].number === courseNum) {\n        curCourse = JSON.parse(JSON.stringify(this.state.allCourses[i]));\n        for (j = 0; j < curCourse.sections.length; j++) {\n          if (curCourse.sections[j].number === sectionNum) {\n            curSec = JSON.parse(JSON.stringify(curCourse.sections[j]));\n            for (k = 0; k < curSec.subsections.length; k++) {\n              if (curSec.subsections[k].number === subSecNum) {\n                curSubSec = JSON.parse(JSON.stringify(curSec.subsections[k]));\n                curSec.subsections = [JSON.parse(JSON.stringify(curSec.subsections[k]))];\n                curCourse.sections = [JSON.parse(JSON.stringify(curSec))];\n                break;\n              }\n            }\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n\n    // traverse through the addedCourse to see whether current course exist\n    var joined = this.state.addedCourses;\n    var added = 0;\n    for (i = 0; i < joined.length; i++) {\n      //  course added before\n      if (joined[i].number === courseNum) {\n        // cur course exist, check section\n        for (j = 0; j < joined[i].sections.length; j++) {\n          if (joined[i].sections[j].number === sectionNum) {\n            // cur section exist, check subsection\n            for (k = 0; k < joined[i].sections[j].subsections.length; k++) {\n              if (joined[i].sections[j].subsections[k].number === subSecNum) {\n                added = 1;\n                break;\n              }\n            }\n            if (!added) {\n              // add the subsection\n              joined[i].sections[j].subsections[joined[i].sections[j].subsections.length] = curSubSec;\n              added = 1;\n            }\n            break;\n          }\n        }\n        // cur course exist, section and subsection not exist\n        if (!added) {\n          joined[i].sections[joined[i].sections.length] = curSec;\n          added = 1;\n        }\n        break;\n      }\n    }\n    if (!added) {\n      // not added before\n      joined = joined.concat(curCourse);\n    }\n\n    this.setState({ addedCourses: joined });\n  }\n\n  // to add section\n  // input string: course number;section number\n  addSection(section) {\n    var splited = section.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n\n    // get the data for current course\n    var curCourse;\n    var curSec;\n    var i, j;\n    for (i = 0; i < this.state.allCourses.length; i++) {\n      if (this.state.allCourses[i].number === courseNum) {\n        curCourse = JSON.parse(JSON.stringify(this.state.allCourses[i]));\n        for (j = 0; j < curCourse.sections.length; j++) {\n          if (curCourse.sections[j].number === sectionNum) {\n            curSec = JSON.parse(JSON.stringify(curCourse.sections[j]));\n            curCourse.sections = [JSON.parse(JSON.stringify(curSec))];\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    // traverse through the addedCourse to see whether current course exist\n    var joined = this.state.addedCourses;\n    var added = 0;\n    for (i = 0; i < joined.length; i++) {\n      //  course added before\n      if (joined[i].number === courseNum) {\n        // cur course exist, check section\n        for (j = 0; j < joined[i].sections.length; j++) {\n          if (joined[i].sections[j].number === sectionNum) {\n            // section exist, replace with the whole section\n            joined[i].sections[j] = curSec;\n            added = 1;\n            break;\n          }\n        }\n        // cur course exist, section and subsection not exist\n        if (!added) {\n          joined[i].sections[joined[i].sections.length] = curSec;\n          added = 1;\n        }\n        break;\n      }\n    }\n    if (!added) {\n      // not added before\n      joined = joined.concat(curCourse);\n    }\n\n    this.setState({ addedCourses: joined });\n  }\n\n  // to remove course\n  // input the course json object\n  remCourse(course) {\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var i;\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number !== course.number) {\n        // not the course to delete\n        removed.push(ori[i]);\n      }\n    }\n\n    this.setState({ addedCourses: removed })\n  }\n\n  // to remove section\n  // input string: course number;section number\n  remSection(section) {\n    var splited = section.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var remCourse;\n\n    var i, j;\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number === courseNum) {\n        remCourse = JSON.parse(JSON.stringify(ori[i]));\n        remCourse.sections = [];\n        // the course to remove section, keep the section not to remove\n        for (j = 0; j < ori[i].sections.length; j++) {\n          // add section not to remove\n          if (ori[i].sections[j].number !== sectionNum) {\n            remCourse.sections[remCourse.sections.length] = ori[i].sections[j];\n          }\n        }\n        // if no section left, delete course\n        if (remCourse.sections.length) {\n          removed.push(remCourse)\n        }\n      } else {\n        // not the course to remove section\n        removed.push(ori[i])\n      }\n    }\n    this.setState({ addedCourses: removed })\n  }\n\n  // to remove subsection\n  // input string: course number;section number;subsection number\n  remSubSection(subsection) {\n    // split to get course, section, subsetion number\n    var splited = subsection.split(\";\");\n    var courseNum = splited[0];\n    var sectionNum = splited[1];\n    var subSecNum = splited[2];\n\n    var ori = this.state.addedCourses;\n    var removed = [];\n    var remCourse;\n    var remSection;\n\n    // traverse through the addedCourse to see whether current course exist\n    var i, j, k;\n    for (i = 0; i < ori.length; i++) {\n      //  course added before\n      if (ori[i].number === courseNum) {\n        // cur course exist, keep sections not to remove\n        remCourse = JSON.parse(JSON.stringify(ori[i]));\n        remCourse.sections = [];\n        for (j = 0; j < ori[i].sections.length; j++) {\n          if (ori[i].sections[j].number === sectionNum) {\n            // cur section, keep subsection not to remove\n            remSection = JSON.parse(JSON.stringify(ori[i].sections[j]));\n            remSection.subsections = [];\n            for (k = 0; k < ori[i].sections[j].subsections.length; k++) {\n              if (ori[i].sections[j].subsections[k].number !== subSecNum) {\n                remSection.subsections[remSection.subsections.length] = ori[i].sections[j].subsections[k];\n              }\n            }\n            // if no subsection left, delete section\n            if (remSection.subsections.length) {\n              remCourse.sections[remCourse.sections.length] = remSection;\n            }\n          } else {\n            remCourse.sections[remCourse.sections.length] = ori[i].sections[j];\n          }\n        }\n        // if no section left, delete course\n        if (remCourse.sections.length) {\n          removed.push(remCourse)\n        }\n      } else {\n        // course not to remove\n        removed.push(ori[i]);\n      }\n    }\n\n    this.setState({ addedCourses: removed });\n  }\n\n  rating(rating) {\n    // in the format course number:rating\n    // get a list of interested areas and add courses to it.\n    // if rating < 3 or change to no rated, delete the related interests\n    // store as the formate course number: course name; list of interests\n    var rating_num = rating.split(\":\")[1];\n    var rating_course = rating.split(\":\")[0];\n\n    var int_courses = this.state.interestedCourses;\n\n    if (rating_num === \"No Rating\" || parseInt(rating_num) < 3) {\n      // remove from interested courses\n      for (var i = 0; i < int_courses.length; i++) {\n        if (int_courses[i] === rating_course) {\n          int_courses.splice(i, 1);\n        }\n      }\n    } else {\n      // add to interested courses\n      if (int_courses.indexOf(rating_course) === -1)\n        int_courses.push(rating_course);\n    }\n\n    this.setState({ interestedCourses: int_courses });\n  }\n\n  wishList(course) {\n    // check whether the course was added before\n    var wished = this.state.wishCourses;\n    var added = 0;\n    for (var i = 0; i < wished.length; i++) {\n      //  course added before, remove it\n      if (wished[i].split(\":\")[0] === course.split(\":\")[0]) {\n        wished.splice(i, 1);\n        added = 1;\n      }\n    }\n\n    if (!added) {\n      // course not added before\n      wished = wished.concat(course);\n    }\n\n    this.setState({ wishCourses: wished })\n  }\n\n\n  render() {\n    return (\n      <React.Fragment>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n        <header class=\"navbar navbar-expand-md bg-light pl-3 pt-3\" style={{ height: \"5vh\" }}>\n          <h1 class=\"header-text\">Course Search</h1>\n        </header>\n\n        <Tabs defaultActiveKey=\"search_cart\" style={{ zIndex: 1, width: '100%', backgroundColor: 'white' }}>\n          <Tab eventKey=\"search_cart\" title=\"Search and Cart\">\n            <div class=\"container-fluid m-0 p-0 overflow-hidden bg-light\" style={{ height: \"95vh\" }}>\n              <div class=\"row m-0 p-0 vh-100\">\n                <div class=\"col-md-8 p-0 m-0 overflow-hidden vh-100\">\n                  <div class=\"row p-0 m-0\">\n                    <div class=\"col-3 border overflow-auto vh-100 pt-2 px-2\">\n                      <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects} interests={this.state.interests} />\n                    </div>\n                    <div class=\"col-9 border overflow-auto vh-100 pt-2 pb-5 px-3\" >\n                      <CourseArea data={this.state.filteredCourses} allData={this.state.allCourses} addSubSection={this.addSubSection.bind(this)} addSection={this.addSection.bind(this)} addCourse={this.addCourse.bind(this)} cartMode={false} compleCourses={this.state.compleCourses} />\n                    </div>\n                  </div>\n                </div>\n                <div id=\"cartBg\" class=\"col-md-4 border overflow-auto vh-100 pt-2 pb-5 px-3\">\n                  <CourseArea data={this.state.addedCourses} allData={this.state.allCourses} remSubSection={this.remSubSection.bind(this)} remSection={this.remSection.bind(this)} remCourse={this.remCourse.bind(this)} wishCourse={this.wishList.bind(this)} wishCourses={this.state.wishCourses} cartMode={true} compleCourses={this.state.compleCourses} />\n                </div>\n              </div>\n            </div>\n          </Tab>\n\n          <Tab eventKey=\"Completed\" title=\"Completed Courses\">\n            <div class=\"p-2\">\n              <h3><strong>Completed Courses</strong></h3>\n              <CompletedCourseArea courses={this.state.allCourses} compleCourses={this.state.compleCourses} rating={this.rating.bind(this)} />\n            </div>\n          </Tab>\n\n          <Tab title=\"Recommended Courses\" eventKey=\"Recommended\">\n            <div class=\"p-2\">\n              <h3><strong>Recommended Courses</strong></h3>\n              <RecomCourseArea courses={this.state.allCourses} interestedCourses={this.state.interestedCourses} compleCourses={this.state.compleCourses} wishCourses={this.state.wishCourses} wishCourse={this.wishList.bind(this)}/>\n            </div>\n          </Tab>\n        </Tabs>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}