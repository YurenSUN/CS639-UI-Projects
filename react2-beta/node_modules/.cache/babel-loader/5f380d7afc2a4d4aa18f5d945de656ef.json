{"ast":null,"code":"var _jsxFileName = \"/Users/sun/Desktop/Comp Sci 639 UI/HW/react2-beta-YurenSUN/src/Course.js\";\nimport React from 'react'; // import { Container } from 'react-bootstrap';\n\nimport './App.css';\nimport Section from './Section';\n\nclass Course extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parsedReq: this.parseReq(this.props.data.requisites),\n      showSection: false,\n      addedWl: this.checkWL(),\n      reqPath: \"\"\n    };\n  }\n\n  checkWL() {\n    if (this.props.cartMode && this.props.wishCourses) {\n      let wished = this.props.wishCourses;\n\n      for (var i = 0; i < wished.length; i++) {\n        //  course added before, remove it\n        if (wished[i].split(\":\")[0] === this.props.data.number) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  } // function to parse the prerequisties\n\n\n  parseReq(data) {\n    if (!data.length) {\n      // no req\n      return \"None\";\n    }\n\n    let arrToJoin = [];\n\n    for (const cur in data) {\n      arrToJoin.push(data[cur].join(\" OR \"));\n    }\n\n    return \"(\" + arrToJoin.join(\") AND (\") + \")\";\n  } // show sections of the course\n\n\n  changeShow() {\n    if (this.state.showSection) this.setState({\n      showSection: false\n    });else this.setState({\n      showSection: true\n    });\n  }\n\n  changeBg() {\n    // update the new color if courses added\n    document.getElementById(\"cartBg\").style.background = \"#dadfe1\";\n  } // change wl\n\n\n  changeWL() {\n    if (this.state.addedWl) this.setState({\n      addedWl: false\n    });else this.setState({\n      addedWl: true\n    });\n  }\n\n  courseToTake() {\n    // find whether there are prereq not met\n    // run through the prereq and check in completed courses\n    if (this.props.cartMode === false) {\n      return \"\";\n    } // cart mode\n\n\n    var courses = [];\n    var preReq = Object.values(this.props.data.requisites);\n    let completed = Object.values(this.props.compleCourses)[0];\n    var prereqs = this.props.prereqs;\n    var i, j, k, l;\n\n    if (preReq.length) {\n      // preReq is not null\n      for (i = 0; i < preReq.length; i++) {\n        var not_meet = [];\n\n        for (j = 0; j < preReq[i].length; j++) {\n          if (completed && completed.includes(preReq[i][j])) {\n            continue;\n          } else {\n            not_meet.push(preReq[i][j]);\n          }\n        }\n\n        if (not_meet.length) {\n          // find the path\n          for (k = 0; k < not_meet.length; k++) {\n            var cur_not_meets = [not_meet[k]];\n            var cur_added = [\"(\" + not_meet[k] + \")\"];\n\n            while (cur_not_meets.length) {\n              // start with the first index\n              var cur_not_meet = cur_not_meets[0];\n              cur_not_meets.shift(); // find the not completed prereq\n\n              var cur_prereq = prereqs[cur_not_meet];\n\n              for (const cur in cur_prereq) {\n                for (l = 0; l < cur_prereq[cur].length; l++) {\n                  // remove completed\n                  if (completed && completed.includes(cur_prereq[cur][l])) {\n                    cur_prereq[cur].splice(l, 1);\n                  } else {\n                    cur_not_meets.push(cur_prereq[cur][l]);\n                  }\n                }\n\n                if (cur_prereq[cur].length === 0) {\n                  cur_prereq.splice(cur, 1);\n                }\n              }\n\n              if (cur_prereq.length) {\n                cur_added.push(this.parseReq(cur_prereq));\n              }\n            }\n\n            not_meet[k] = cur_added.join(\" AFTER \");\n          }\n\n          courses.push(not_meet.join(\") OR (\"));\n        }\n      }\n    } else {\n      return \"\";\n    }\n\n    if (courses.length) {\n      return \"(\" + courses.join(\") AND (\") + \")\";\n    } else {\n      return \"\";\n    }\n  }\n\n  formatCourseToTake(courseStr) {\n    var returnStr = \"\";\n    var coursesArr = courseStr.split(\"() AND (\");\n    var i;\n\n    for (i = 0; i < coursesArr.length; i++) {\n      returnStr += i.toString + \": \" + coursesArr[i];\n    }\n\n    return returnStr;\n  }\n\n  componentDidUpdate() {\n    // update whether in wishlist\n    if (this.props.cartMode) {\n      if (this.state.addedWl !== this.checkWL()) {\n        this.setState({\n          addedWl: this.checkWL()\n        });\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"bg-white border rounded mt-2 pb-4 px-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      class: \"primary mt-4 mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 41\n      }\n    }, this.props.data.number, \": \", this.props.data.name)), /*#__PURE__*/React.createElement(\"h4\", {\n      class: this.props.cartMode ? \"mt-0\" : \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, this.props.cartMode ? this.props.data.credits + \" Credits\" : \"Credits: \" + this.props.data.credits)), /*#__PURE__*/React.createElement(\"h4\", {\n      class: \"primary\",\n      style: {\n        display: this.props.cartMode && this.courseToTake().length ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, \"You did not meet the prerequisties yet! \", /*#__PURE__*/React.createElement(\"br\", {\n      class: \"mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 53\n      }\n    }), \"Ways to fulfills the requisites:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 47\n      }\n    }), this.formatCourseToTake(this.courseToTake())), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"rounded bg-light secondary font-weight-bold my-1\",\n      onClick: () => {\n        this.props.wishCallback(this.props.data.number + \": \" + this.props.data.name + \";\" + this.courseToTake());\n        this.changeWL();\n      },\n      style: {\n        display: this.props.cartMode && this.courseToTake().length ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, this.state.addedWl ? \"Remove from WishList\" : \"Add to WishList\"), /*#__PURE__*/React.createElement(\"h4\", {\n      class: \"mb-4\",\n      style: {\n        display: this.props.cartMode ? \"none\" : \"block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, \"Subject: \", this.props.data.subject)), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"text-black-50\",\n      style: {\n        display: this.props.cartMode ? \"none\" : \"block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, this.props.data.description), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"text-black-50 m-0\",\n      style: {\n        display: this.props.cartMode ? \"none\" : \"block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, \"Requisites:\"), \" \", this.state.parsedReq), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"text-black-50\",\n      style: {\n        display: this.props.cartMode ? \"none\" : \"block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, \"Keywords:\"), \" \", this.props.data.keywords.join(\", \")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"rounded bg-light secondary font-weight-bold my-1\",\n      onClick: () => {\n        this.props.courseCallback(this.props.data);\n        this.changeBg();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, this.props.cartMode ? \"Remove Course\" : \"Add Course\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"rounded my-1\",\n      onClick: () => this.changeShow(),\n      style: {\n        display: this.props.cartMode ? \"none\" : \"block\",\n        backgroundColor: this.state.showSection ? \"#dadfe1\" : \"white\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, this.state.showSection ? \"Hide Sections\" : \"Show Sections\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: this.props.data.number,\n      style: {\n        display: this.state.showSection || this.props.cartMode ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      class: \"table-sm mx-0 my-2 w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      class: \"back-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, \"Number\"), /*#__PURE__*/React.createElement(\"th\", {\n      style: {\n        display: this.props.cartMode ? \"none\" : \"\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 19\n      }\n    }, \"Instructor\"), /*#__PURE__*/React.createElement(\"th\", {\n      style: {\n        display: this.props.cartMode ? \"none\" : \"\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(\"th\", {\n      class: this.props.cartMode ? \"w-50\" : \"w-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, \"Meeting Times\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }, \"Option\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, this.props.data.sections.map(curSection => /*#__PURE__*/React.createElement(Section, {\n      key: this.props.data.number + curSection.number,\n      data: curSection,\n      id: this.props.data.number + \";\" + curSection.number,\n      cartMode: this.props.cartMode,\n      sectionCallback: this.props.sectionCallbackPass,\n      subSectionCallbackPass1: this.props.subSectionCallbackPass2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nexport default Course;","map":{"version":3,"sources":["/Users/sun/Desktop/Comp Sci 639 UI/HW/react2-beta-YurenSUN/src/Course.js"],"names":["React","Section","Course","Component","constructor","props","state","parsedReq","parseReq","data","requisites","showSection","addedWl","checkWL","reqPath","cartMode","wishCourses","wished","i","length","split","number","arrToJoin","cur","push","join","changeShow","setState","changeBg","document","getElementById","style","background","changeWL","courseToTake","courses","preReq","Object","values","completed","compleCourses","prereqs","j","k","l","not_meet","includes","cur_not_meets","cur_added","cur_not_meet","shift","cur_prereq","splice","formatCourseToTake","courseStr","returnStr","coursesArr","toString","componentDidUpdate","render","name","credits","display","wishCallback","subject","description","keywords","courseCallback","backgroundColor","sections","map","curSection","sectionCallbackPass","subSectionCallbackPass2"],"mappings":"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","sourcesContent":["import React from 'react';\r\n// import { Container } from 'react-bootstrap';\r\nimport './App.css';\r\nimport Section from './Section'\r\n\r\nclass Course extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      parsedReq: this.parseReq(this.props.data.requisites),\r\n      showSection: false,\r\n      addedWl: this.checkWL(),\r\n      reqPath: \"\"\r\n    };\r\n  }\r\n\r\n  checkWL() {\r\n    if (this.props.cartMode && this.props.wishCourses) {\r\n      let wished = this.props.wishCourses;\r\n      for (var i = 0; i < wished.length; i++) {\r\n        //  course added before, remove it\r\n        if (wished[i].split(\":\")[0] === this.props.data.number) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // function to parse the prerequisties\r\n  parseReq(data) {\r\n    if (!data.length) {\r\n      // no req\r\n      return \"None\";\r\n    }\r\n    let arrToJoin = [];\r\n    for (const cur in data) {\r\n      arrToJoin.push(data[cur].join(\" OR \"));\r\n    }\r\n\r\n    return \"(\" + arrToJoin.join(\") AND (\") + \")\";\r\n  }\r\n\r\n  // show sections of the course\r\n  changeShow() {\r\n    if (this.state.showSection)\r\n      this.setState({ showSection: false });\r\n    else\r\n      this.setState({ showSection: true });\r\n  }\r\n\r\n  changeBg() {\r\n    // update the new color if courses added\r\n    document.getElementById(\"cartBg\").style.background = \"#dadfe1\";\r\n  }\r\n\r\n  // change wl\r\n  changeWL() {\r\n    if (this.state.addedWl)\r\n      this.setState({ addedWl: false });\r\n    else\r\n      this.setState({ addedWl: true });\r\n  }\r\n\r\n  courseToTake() {\r\n    // find whether there are prereq not met\r\n    // run through the prereq and check in completed courses\r\n    if (this.props.cartMode === false) {\r\n      return \"\";\r\n    }\r\n    // cart mode\r\n    var courses = [];\r\n    var preReq = Object.values(this.props.data.requisites);\r\n    let completed = Object.values(this.props.compleCourses)[0];\r\n    var prereqs = this.props.prereqs;\r\n\r\n    var i, j, k, l;\r\n    if (preReq.length) {\r\n      // preReq is not null\r\n      for (i = 0; i < preReq.length; i++) {\r\n        var not_meet = [];\r\n        for (j = 0; j < preReq[i].length; j++) {\r\n          if (completed && completed.includes(preReq[i][j])) {\r\n            continue;\r\n          } else {\r\n            not_meet.push(preReq[i][j]);\r\n          }\r\n        }\r\n        if (not_meet.length) {\r\n          // find the path\r\n          for (k = 0; k < not_meet.length; k++) {\r\n            var cur_not_meets = [not_meet[k]]\r\n            var cur_added = [\"(\" + not_meet[k] + \")\"]\r\n            while (cur_not_meets.length) {\r\n              // start with the first index\r\n              var cur_not_meet = cur_not_meets[0];\r\n              cur_not_meets.shift();\r\n\r\n              // find the not completed prereq\r\n              var cur_prereq = prereqs[cur_not_meet]\r\n\r\n              for (const cur in cur_prereq) {\r\n                for (l = 0; l < cur_prereq[cur].length; l++) {\r\n                  // remove completed\r\n                  if (completed && completed.includes(cur_prereq[cur][l])) {\r\n                    cur_prereq[cur].splice(l, 1);\r\n                  } else {\r\n                    cur_not_meets.push(cur_prereq[cur][l]);\r\n                  }\r\n                }\r\n\r\n                if (cur_prereq[cur].length === 0) {\r\n                  cur_prereq.splice(cur, 1);\r\n                }\r\n              }\r\n\r\n              if (cur_prereq.length) {\r\n                cur_added.push(\r\n                  this.parseReq(cur_prereq)\r\n                )\r\n              }\r\n            }\r\n            not_meet[k] = cur_added.join(\" AFTER \");\r\n          }\r\n          courses.push(not_meet.join(\") OR (\"));\r\n        }\r\n      }\r\n    } else {\r\n      return \"\";\r\n    }\r\n\r\n    if (courses.length) {\r\n      return \"(\" + courses.join(\") AND (\") + \")\";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  formatCourseToTake(courseStr){\r\n    var returnStr = \"\"\r\n    var coursesArr = courseStr.split(\"() AND (\");\r\n\r\n    var i;\r\n    for (i = 0; i < coursesArr.length; i++){\r\n      returnStr += i.toString + \": \" + coursesArr[i];\r\n    }\r\n\r\n    return returnStr\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // update whether in wishlist\r\n    if (this.props.cartMode) {\r\n      if (this.state.addedWl !== this.checkWL()) {\r\n        this.setState({ addedWl: this.checkWL() })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div class=\"bg-white border rounded mt-2 pb-4 px-2\">\r\n          <h2 class=\"primary mt-4 mb-0\"><strong>\r\n            {this.props.data.number}: {this.props.data.name}\r\n          </strong></h2>\r\n          <h4 class={this.props.cartMode ? \"mt-0\" : \"mt-4\"}>\r\n            <strong>{this.props.cartMode ? this.props.data.credits + \" Credits\" : \"Credits: \" + this.props.data.credits}</strong>\r\n          </h4>\r\n          {/* prereq and wishlist */}\r\n          <h4 class=\"primary\" style={{ display: this.props.cartMode && this.courseToTake().length ? \"block\" : \"none\" }}>\r\n            You did not meet the prerequisties yet! <br class=\"mt-5\" />\r\n              Ways to fulfills the requisites:<br></br> \r\n              {this.formatCourseToTake(this.courseToTake())}\r\n            </h4>\r\n          <button className=\"rounded bg-light secondary font-weight-bold my-1\" onClick={() => { this.props.wishCallback(this.props.data.number + \": \" + this.props.data.name + \";\" + this.courseToTake()); this.changeWL(); }}\r\n            style={{ display: this.props.cartMode && this.courseToTake().length ? \"block\" : \"none\" }}>\r\n            {this.state.addedWl ? \"Remove from WishList\" : \"Add to WishList\"}\r\n          </button>\r\n\r\n          <h4 class=\"mb-4\" style={{ display: this.props.cartMode ? \"none\" : \"block\" }}>\r\n            <strong>Subject: {this.props.data.subject}</strong>\r\n          </h4>\r\n          <p class=\"text-black-50\" style={{ display: this.props.cartMode ? \"none\" : \"block\" }}>\r\n            {this.props.data.description}\r\n          </p>\r\n          <p class=\"text-black-50 m-0\" style={{ display: this.props.cartMode ? \"none\" : \"block\" }}>\r\n            <strong>Requisites:</strong> {this.state.parsedReq}\r\n          </p>\r\n          <p class=\"text-black-50\" style={{ display: this.props.cartMode ? \"none\" : \"block\" }}>\r\n            <strong>Keywords:</strong> {this.props.data.keywords.join(\", \")}\r\n          </p>\r\n\r\n          {/* show section, add course */}\r\n          <button className=\"rounded bg-light secondary font-weight-bold my-1\" onClick={() => { this.props.courseCallback(this.props.data); this.changeBg(); }}>{this.props.cartMode ? \"Remove Course\" : \"Add Course\"}</button>\r\n          <button class=\"rounded my-1\" onClick={() => this.changeShow()} style={{ display: this.props.cartMode ? \"none\" : \"block\", backgroundColor: this.state.showSection ? \"#dadfe1\" : \"white\"}}>{this.state.showSection ? \"Hide Sections\" : \"Show Sections\"}</button>\r\n\r\n          <div id={this.props.data.number} style={{ display: this.state.showSection || this.props.cartMode ? \"block\" : \"none\" }}>\r\n            <table class=\"table-sm mx-0 my-2 w-100\">\r\n              <thead>\r\n                <tr class=\"back-primary\">\r\n                  <th>\r\n                    Number\r\n                    </th>\r\n                  <th style={{ display: this.props.cartMode ? \"none\" : \"\" }}>\r\n                    Instructor\r\n                    </th>\r\n                  <th style={{ display: this.props.cartMode ? \"none\" : \"\" }}>\r\n                    Location\r\n                    </th>\r\n                  <th class={this.props.cartMode ? \"w-50\" : \"w-30\"}>\r\n                    Meeting Times\r\n                    </th>\r\n                  <th>\r\n                    Option\r\n                    </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.props.data.sections.map(curSection => (\r\n                  <Section key={this.props.data.number + curSection.number} data={curSection} id={this.props.data.number + \";\" + curSection.number} cartMode={this.props.cartMode} sectionCallback={this.props.sectionCallbackPass} subSectionCallbackPass1={this.props.subSectionCallbackPass2} />\r\n                ))}\r\n              </tbody></table>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default Course;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}